# Zoho API Integration: Obtaining Access Tokens and Posting Data with Postman

## Terminologies

## Authorisation Code: 
A short-lived token generated by Zoho accounts, sent to third-party apps e.g., POSTMAN for exchange into an access token.

## Access Token: 
A time-limited key that authorises client access to protected resources from a server. It remains valid for up to an hour.

## Refresh Token: 
Used to obtain a new access token after expiration. Refresh tokens don't expire, with a limit of 20 per account, where the 21st replaces the first.

## Scope: 
Determines client access to an end-user's protected resource, defined by service name, scope name, and operation type. Scopes can include multiple parameters, enabling requests for various access levels.

## Service Name: 
Identifies Zoho products (e.g., ZohoCRM).

## Scope Name: 
Groups user data within products.

## Operation Type: 
Specifies actions (ALL, READ, CREATE, DELETE, UPDATE).

Example of a scope: ZohoCRM.modules.READ

Multiple scopes can also be requested e.g., ZohoCRM.modules.READ, ZohoCRM.settings.READ

# Generating a temporary scope token
1. Navigate to Zoho Developer Console, then click on “Self Client” type.
2. Ensure that client type is “Self client” then click on “create”.
3. A popup message will appear. Click on “OK”.
4. Click on “Generate Code” tab.
5. Specify the access level that you would like to give permission to the application that is going to use this access token. a) Scope = ZohoCRM.modules.ALL will allow the application to gain access to all modules. b) Applying the following parameter: scope = ZohoCRM.modules.{module_name}.{operation_type}, specifies the type and level of access. This is achieved by replacing {module_name} with your module name only and {operation_type} with the type of permission you would like to give access to e.g.,-  ALL: Full access to the record- WRITE: Edit records in the module- CREATE: Create records in the module.
Example: ZohoCRM.Lead.CREATE
6. Set the time duration to the maximum you can find in the dropdown menu as the token that you will be provided with now is temporary.
7. Give a simple description to the scope provided.
8. Click on “CRM” portal. Then decide what you want to give access to e.g., production or sandbox.
9. Download the generated file. It will contain your client id, client secret and the temporary scope token.

# Posting data via Postman
Postman provides a user-friendly interface for making HTTP requests, including the ability to send POST requests to APIs which is what we will be using to send data to Zoho CRM.

## Steps
1. Create an account with Postman.
2. Navigate to your Postman workspace. 
3. Click on the + sign to start a new request tab.
4. Change the HTTP request to POST.
5. Add the following POST URL endpoint: https://accounts.zoho.com/oauth/v2/token. To make an access token request, you need to first send an authorisation grant code to Zoho Accounts.
6. Add a header to provide additional information on the media type of the resource being sent. In our case, it is of “form-data”.
7. Navigate to the body tab. Select the data type that you will be sending. Add the following keys using the values that you have obtained from the file generated by Zoho (above in step 10).

## Mandatory Parameters:
## client_id: 
Obtained from registering your client at the Zoho Accounts developer console.

## grant_type: 
Value must be 'authorization_code'.

## client_secret: 
Obtained from registering your application at the Zoho Accounts developer console.

## redirect_uri: 
The URI endpoint that Zoho Accounts will redirect the web browser to. Make sure it is the same URI as the one specified in the authorisation request which in our case it is: http://www.example.com/yourcallback 

## code: 
The authorisation code you received as a response to the authorisation request.

8. Once you click on “Send” and your request is successful, you should receive the following object in the terminal of the screenshot below:
9. Make note of the refresh_token from the response as you will need it to gain the access token.
10. Open another HTTP request tab and add the same POST url endpoint: https://accounts.zoho.com/oauth/v2/token, with the header being: Content-Type: application/x-www-form-urlencoded.
11. Add the following key-value pairs in the body of the POST request:
## client_id: 
Obtained from registering your client at the Zoho Accounts developer console.

## grant_type: 
Value must be 'refresh_token'.

## client_secret: 
Obtained from registering your application at the Zoho Accounts developer console

## refresh_token: 
Obtained from the authorisation request.

12. Once you click on “Send” and your request is successful, you will get the access token key-value pair in your response object in the terminal.
13. Open another HTTP request tab and add the desired POST url endpoint that you would like to post data to, following this format: {api-domain}/crm/{version}/{module_api_name} e.g., https://zohoapis.com/crm/v2/leads to post to Leads module.
14. Navigate to “Authorization” tab and the key below with the value being Zoho-oauthtoken {access-token}. The access token is the token that has been obtained using the refresh token previously (from the second request). Ensure that there is a space between Zoho-oauthtoken and {access-token} when inputting the value of “Authorization” key.
15. Navigate to the 'Body' tab, then click on 'Raw' and select 'JSON' from the dropdown menu to specify the type of data you will be sending.
16. Once you click on “Send” and your POST request is successful, you should receive a success code in your response.
17. Navigate to the module that you have inputted data to in the CRM and check if it has been populated.

Link to Full documentation: https://tgeab.atlassian.net/wiki/spaces/~63e228c1f1475ad42c5bc1ce/pages/636420097/Zoho+API+Integration+Obtaining+Access+Tokens+and+Posting+Data+with+Postman
